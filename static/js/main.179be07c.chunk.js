(this["webpackJsonpcurrency-exchange"]=this["webpackJsonpcurrency-exchange"]||[]).push([[0],{28:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),i=n(2),u=n(3),s=n(7),l=n(5),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=(((null===e||void 0===e?void 0:e.split("#")[1])||"").split("?")[1]||"").split("&").map((function(e){return e.split("=")})).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return[n,!r||decodeURIComponent(r)]}));return Object.fromEntries(t)};function b(e,t){var n=Object(r.useState)((function(){return d()[e]||t})),a=Object(i.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var t=function(t){var n=d(t.newURL)[e];n!==c&&o(n)};return window.addEventListener("hashchange",t,!1),function(){return window.removeEventListener("hashchange",t,!1)}}),[c,e]),[c,function(t){o(t);var n=d(),r=Object.entries(Object(l.a)(Object(l.a)({},n),{},Object(s.a)({},e,t))).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1]})),a=window.location.hash.split("?"),c=Object(i.a)(a,1)[0],u=r.map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return!0!==r&&r?[n,r].join("="):n})).join("&");window.location.hash="".concat(c).concat(r.length?"?".concat(u):"")}]}var f=n(4),p=n.n(f),h=n(6),m=function(e,t){var n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)(!1),s=Object(i.a)(u,2),l=s[0],d=s[1],b=Object(r.useState)(),f=Object(i.a)(b,2),m=f[0],j=f[1],x=Object(r.useState)(),g=Object(i.a)(x,2),v=g[0],O=g[1],y=Object(r.useCallback)(Object(h.a)(p.a.mark((function t(){var n,r=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),O(void 0),j(void 0),t.prev=3,t.next=6,e.apply(void 0,r);case 6:return n=t.sent,O(n),t.abrupt("return",n);case 11:throw t.prev=11,t.t0=t.catch(3),j(t.t0),t.t0;case 15:return t.prev=15,o(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])}))),[]);return Object(r.useEffect)((function(){t&&!l&&(d(!0),y())}),[t,l,y]),[v,y,c,m]};function j(e){var t=Number.parseFloat(e+"").toFixed(4),n=t.substring(0,t.length-2);return Number.parseFloat(n)+""}var x=function(e){return function(t,n){return e.every((function(e){return t[e]===n[e]}))}},g={default:{background:"white",active:"#f2f2f2",disabled:"#e4e4e4",disabledText:"#b3b3b3",text:"#494949",lightBorder:"#cccccc"},dark:{background:"#2864d0",active:"#11387a",disabled:"#728499",disabledText:"#abbfd5",text:"white",lightBorder:"#c2c2c2"}},v=u.c.button.withConfig({displayName:"RippleButton",componentId:"sc-zcrqaz-0"})(["background-position:center;background-color:",";font-size:40px;font-weight:bold;line-height:40px;outline:none;padding:7px 12px 10px 12px;transition:background 0.8s;&:hover{background:"," radial-gradient(circle,transparent 1%,"," 1%) center/70000%;}&:active{background-color:",";background-size:100%;transition:background 0s;}"],(function(e){return e.theme.background}),(function(e){return e.theme.active}),(function(e){return e.theme.background}),(function(e){return e.theme.active})),O=Object(u.c)(v).withConfig({displayName:"RippleButton__NormalButton",componentId:"sc-zcrqaz-1"})(["font-size:16px;font-weight:normal;line-height:16px;padding:8px 12px;"]),y=n(16),w=n.n(y);function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||e.includes("-")&&!e.endsWith("+");var n=e.replace(/[^0-9,. ]/g,""),r=n.replace(/[.,](?=.*[.,])/g,"").replace(/[,]/g,"."),a=r.replace(/^0+/,"");a.startsWith(".")&&(a="0".concat(a));var c=a.split("."),o=Object(i.a)(c,2),u=o[0],s=o[1],l=void 0===s?"":s;return a=Number(u.replace(/ /g,"")).toLocaleString("en-US").replace(/,/g," ")+(l?".".concat(l):a.endsWith(".")?".":""),[Number.parseFloat(r.replace(/ /g,"")||"0")*(t?-1:1),"".concat(r?t?"-":"+":"").concat(1===r.length?r:a)]}var k=u.c.div.withConfig({displayName:"CustomTextInputstyles__CustomTextInputStyles",componentId:"sc-1muplrc-0"})(["border:1px solid ",";border-radius:4px;display:flex;margin-right:8px;align-items:center;width:100%;&.focused{border:1px solid ",";.currency-near-input{color:",";}}.currency-near-input{font-size:30px;padding:8px;color:",";}input{background:none;border-color:transparent;color:",";display:block;font-size:35px;text-align:right;width:100%;padding:6px 4px 6px 0;&:focus{border-color:transparent;outline:none;}}"],(function(e){return e.theme.lightBorder}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.lightBorder}),(function(e){return e.theme.text}));k.defaultProps={theme:g.default};var N=n(1);var S=a.a.memo((function(e){var t=e.rate,n=e.value,a=e.setValue,c=e.symbol,o=Object(r.useState)(""),u=Object(i.a)(o,2),s=u[0],l=u[1],d=Object(r.useState)(0),b=Object(i.a)(d,2),f=b[0],p=b[1];Object(r.useEffect)((function(){if(t){if(f!==n){var e=function(e,t){var n=e*t;return C(j(n),n<0)}(n,t),r=Object(i.a)(e,2),a=r[0],c=r[1];p(a),l(c)}}else l("Loading...  ")}),[t,n,f]);var h=Object(r.useState)(!1),m=Object(i.a)(h,2),x=m[0],g=m[1];return Object(N.jsxs)(k,{className:w()("pseudo-input",{focused:x}),children:[Object(N.jsx)("div",{className:"currency-near-input",children:c}),Object(N.jsx)("input",{type:"text",inputMode:"numeric",formNoValidate:!0,disabled:!t,onFocus:function(){return g(!0)},onBlur:function(){return g(!1)},value:s,onKeyDown:function(e){e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||/^[0-9,.+-]{1,1}/.test(e.key)||e.preventDefault()},onChange:function(e){return function(e){if(t){var n=C(e),r=Object(i.a)(n,2),c=r[0],o=r[1];l(o);var u=c/t;p(u),a(u)}}(e.target.value)}})]})}),x(["value","rate","symbol"])),L=u.c.div.withConfig({displayName:"CurrencyBlockWithDropdownstyles__CurrencyBlockWithDropdownStyles",componentId:"sc-x9ia5s-0"})(["align-items:center;display:flex;height:150px;padding:0 8px;position:relative;background:linear-gradient(0deg,"," 0%,"," 100%);select{height:60px;background:none;width:150px;font-size:35px;margin:0 8px;padding:8px 0;}"],(function(e){return e.theme.active}),(function(e){return e.theme.background}));L.defaultProps={theme:g.default};var B=u.c.div.withConfig({displayName:"CurrencyBlockWithDropdownstyles__YourBalanceBlock",componentId:"sc-x9ia5s-1"})(["display:flex;font-size:16px;justify-content:space-between;position:absolute;left:57px;bottom:20px;right:64px;"]),_=function(e){var t=e.prev,n=e.next,r=e.children,a=function(e){switch(e.code){case"ArrowRight":n();break;case"ArrowLeft":t()}};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(v,{onClick:n,onKeyDown:a,children:"\u2039"}),r,Object(N.jsx)(v,{onClick:t,onKeyDown:a,children:"\u203a"})]})},I=function(e){var t=e.currencyName,n=e.setCurrencyName,r=e.fromCurrencyName,a=e.total,c=e.setTotal,o=e.balances,i=e.rate,u=Object.values(o).map((function(e){return e.name})),s=o[t].symbol;return Object(N.jsx)(L,{children:Object(N.jsxs)(_,{next:function(){var e=u.findIndex((function(e){return e===t}))-1;n(u[e<0?u.length-1:e])},prev:function(){var e=u.findIndex((function(e){return e===t}))+1;n(u[e>u.length-1?0:e])},children:[Object(N.jsx)("select",{value:t,onChange:function(e){return n(e.target.value)},children:u.map((function(e){return Object(N.jsx)("option",{value:e,children:e},e)}))}),Object(N.jsx)(S,{rate:i,value:a,setValue:c,symbol:s}),Object(N.jsxs)(B,{children:[Object(N.jsxs)("span",{children:["You have\xa0\xa0",s," ",j(o[t].balance)]}),i&&t!==r&&Object(N.jsxs)("span",{children:[s," 1 = ",o[r].symbol," ",j(1/i)]})]})]})})},E=u.c.div.withConfig({displayName:"MiddleSwapButton__MiddleSwapButtonStyles",componentId:"sc-cj3e1f-0"})(["text-align:center;& button{background:transparent;border:none;border-radius:4px;padding:4px 2px 0;position:absolute;margin-top:2px;transform:translate(-50%,-50%);z-index:1;& > svg > path{fill:",";}}"],(function(e){return e.theme.text}));E.defaultProps={theme:g.default};var D=function(e){var t=e.onClick;return Object(N.jsx)(E,{children:Object(N.jsx)(v,{onClick:t,children:Object(N.jsx)("svg",{height:"34",viewBox:"0 0 14 18",width:"34",children:Object(N.jsx)("path",{d:"M11,14 L11,7 L9,7 L9,14 L6,14 L10,18 L14,14 L11,14 L11,14 Z M4,0 L0,4 L3,4 L3,11 L5,11 L5,4 L8,4 L4,0 L4,0 Z",fill:"#000000",stroke:"none",strokeWidth:"1"})})})})},T=u.c.div.withConfig({displayName:"ExchangeWidgetstyles__CurrencyBlock",componentId:"sc-cb9n7v-0"})(["display:flex;flex-direction:column;position:relative;"]),R=u.c.div.withConfig({displayName:"ExchangeWidgetstyles__Centered",componentId:"sc-cb9n7v-1"})(["display:flex;justify-content:center;z-index:1;& > button{min-width:50%;}"]),z=u.c.div.withConfig({displayName:"ExchangeWidgetstyles__ExchangeWidgetStyles",componentId:"sc-cb9n7v-2"})(["border:1px solid ",";border-radius:4px;margin:-18px 0;"],(function(e){return e.theme.lightBorder}));z.defaultProps={theme:g.default};var U=u.c.select.withConfig({displayName:"GlobalCurrencyDropdown__StyledCenteredSelect",componentId:"sc-1f5kk2-0"})(["display:flex;font-weight:bold;font-size:16px;padding:8px;background:",";"],(function(e){return e.theme.background})),F=a.a.memo((function(e){var t=e.toCurrencyName,n=e.fromCurrencyName,r=e.setToValue,a=e.balances,c=e.allRates;return Object(N.jsx)(U,{value:t,onChange:function(e){return r(e.target.value)},children:Object.values(a).filter((function(e){return e.name!==n})).map((function(e){var t=e.name,r=e.symbol,o=null===c||void 0===c?void 0:c[t];return Object(N.jsxs)("option",{value:t,children:[a[n].symbol," 1"," = ",r," ",o?j(o):"Loading..."]},t)}))})}),x(["toCurrencyName","fromCurrencyName","balances","allRates"])),P=function(e){var t=e.selectedCurrencies,n=e.onCurrenciesChanged,r=e.total,a=e.setTotal,c=e.balances,o=e.allRates,i=t.from,u=t.to,s=function(){return n({to:i,from:u})},d=function(e){return e===i?s():n({to:e})},b=!o||!r||r>c[i].balance||r<-c[u].balance/o[u]||Math.abs(r*o[u])<.01||Math.abs(r)<.01;return Object(N.jsxs)(T,{children:[Object(N.jsx)(R,{children:Object(N.jsx)(F,{toCurrencyName:u,fromCurrencyName:i,setToValue:d,balances:c,allRates:o})}),Object(N.jsxs)(z,{children:[Object(N.jsx)(I,{currencyName:i,setCurrencyName:function(e){return u===e?s():n({from:e})},fromCurrencyName:i,total:r,setTotal:a,balances:c,rate:-1}),Object(N.jsx)(D,{onClick:s}),Object(N.jsx)(I,{currencyName:u,setCurrencyName:d,fromCurrencyName:i,total:r,setTotal:a,balances:c,rate:o&&o[u]})]}),Object(N.jsx)(R,{children:Object(N.jsx)(O,{onClick:function(){o&&(c[i].balance=c[i].balance-r,c[u].balance=c[u].balance+r*o[u],e.saveBalances(Object(l.a)({},c)))},disabled:b,children:"Exchange"})})]})};var W,M={EUR:.85,PLN:3.89,USD:1,CHF:.92},K=function(){return Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,300)}));case 2:return e.abrupt("return",{PLN:{name:"PLN",symbol:"z\u0142",balance:100},EUR:{name:"EUR",symbol:"\u20ac",balance:100},USD:{name:"USD",symbol:"$",balance:100},CHF:{name:"CHF",symbol:"\u20a3",balance:100}});case 3:case"end":return e.stop()}}),e)})))()},A=function(){var e=arguments;return Object(h.a)(p.a.mark((function t(){var n,r,a,c,o,i,u,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],r=1e4,!n){t.next=7;break}return t.next=5,new Promise((function(e){return setTimeout(e,300)}));case 5:return console.warn("fetchUSDBaseRates is mocked"),t.abrupt("return",{rates:M,expiration:Date.now()+r});case 7:if(!(a=localStorage.getItem("fetchUSDBaseRates"))){t.next=15;break}if(!((c=JSON.parse(a||"{}"))&&Date.now()<c.expiration)){t.next=14;break}return t.abrupt("return",c);case 14:localStorage.removeItem("fetchUSDBaseRates");case 15:return"359dfde13641413aabe5c3ed15bff1a5",o="https://openexchangerates.org/api/latest.json?app_id=".concat("359dfde13641413aabe5c3ed15bff1a5"),t.next=19,fetch(o);case 19:return t.next=21,t.sent.json();case 21:return i=t.sent,u=i.rates,s={rates:u,expiration:Date.now()+r},localStorage.setItem("fetchUSDBaseRates",JSON.stringify(s)),t.abrupt("return",s);case 26:case"end":return t.stop()}}),t)})))()},V=n(17),J=Object(u.b)(W||(W=Object(V.a)(["\n  body {\n    background: ",";\n    color: ",";\n  }\n\n  select {\n    margin: 0;\n  }\n\n  .pseudo-input,\n  select,\n  button {\n    border-radius: 4px;\n    border: 1px solid ",";\n    color: ",";\n    cursor: pointer;\n\n    &:hover, &:focus, &.focused {\n      &:not([disabled]) {\n        box-shadow: 0 0 4px #999;\n        border-color: ",";\n        outline: none;  \n      }\n    }\n\n    &[disabled] {\n      cursor: not-allowed;\n      background: ",";\n      border-color: ",";\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.active}),(function(e){return e.theme.text}),(function(e){return e.theme.lightBorder}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.disabled}),(function(e){return e.theme.disabledText}),(function(e){return e.theme.disabledText}));J.defaultProps={theme:g.default};var H=u.c.div.withConfig({displayName:"Appstyles__AppStyles",componentId:"sc-1uja81b-0"})(["align-items:center;display:flex;flex-direction:column;margin:auto;max-width:600px;padding:0 8px;position:relative;height:100vh;"]),q=u.c.div.withConfig({displayName:"Appstyles__ThemeSwitchWrapper",componentId:"sc-1uja81b-1"})(["display:flex;justify-content:flex-end;margin-top:-2px;padding:8px;margin-bottom:40px;> button{margin-left:16px;}"]),Y=function(){var e=b("mocked",!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=b("dark",!1),o=Object(i.a)(c,2),s=o[0],l=o[1],d=function(e,t){var n=b(e,String(t)),r=Object(i.a)(n,2),a=r[0],c=r[1],o=Number.parseFloat(a);return[a&&!isNaN(o)?o:t,function(e){return c(e+"")}]}("toConvert",10),f=Object(i.a)(d,2),p=f[0],h=f[1],j=function(e,t){var n=b(e,t),a=Object(i.a)(n,2),c=a[0],o=a[1],u=(c||t).split("_"),s=Object(i.a)(u,2),l=s[0],d=s[1];return{from:l,to:d,onCurrenciesChanged:Object(r.useCallback)((function(e){o([e.from||l,e.to||d].join("_"))}),[l,d])}}("currencies","PLN_EUR"),x=j.from,v=j.to,y=j.onCurrenciesChanged,w=m((function(){return K()}),!0),C=Object(i.a)(w,3),k=C[0],S=C[2],L=Object(r.useState)(null),B=Object(i.a)(L,2),_=B[0],I=B[1];Object(r.useEffect)((function(){k&&I(k)}),[k]);var E=m((function(e){return A(e)})),D=Object(i.a)(E,4),T=D[0],R=D[1],z=D[3];Object(r.useEffect)((function(){if(T&&T.expiration){var e=setTimeout((function(){return R(n)}),T.expiration-Date.now());return function(){return clearTimeout(e)}}}),[T,n,R]),Object(r.useEffect)((function(){R(n)}),[n,R]);var U=(T||{}).rates,F=Object(r.useState)(),W=Object(i.a)(F,2),M=W[0],V=W[1];Object(r.useEffect)((function(){U&&V(U)}),[U]);var Y=Object(r.useMemo)((function(){return M?Object.fromEntries(Object.entries(M).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1]/M[x]]}))):M}),[M,x]),Z=!S&&(z||!_),G=s?g.dark:g.default;return Object(N.jsxs)(u.a,{theme:G,children:[Object(N.jsx)(J,{theme:G}),Object(N.jsxs)(q,{children:[n&&Object(N.jsx)(O,{onClick:function(){return a(!1)},children:"Disable \ud80c\udd9f"}),Object(N.jsx)(O,{onClick:function(){return l(!s)},children:s?"To day theme \u263c":"To night theme \u263d"})]}),Object(N.jsxs)(H,{children:[S&&Object(N.jsx)("div",{children:"Loading..."}),Z&&Object(N.jsxs)("div",{children:[z&&Object(N.jsxs)(N.Fragment,{children:["API error happened, try to"," ",Object(N.jsx)(O,{onClick:function(){return a(!0)},children:"Use Mocks \ud80c\udd9f"})]}),!z&&Object(N.jsx)(N.Fragment,{children:"Can not load currencies"})]}),!Z&&_&&Object(N.jsx)(P,{selectedCurrencies:{from:x,to:v},onCurrenciesChanged:y,total:p,setTotal:h,balances:_,saveBalances:I,allRates:Y})]})]})};o.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(Y,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.179be07c.chunk.js.map